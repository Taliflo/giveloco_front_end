<div class="users-account-details-edit">

    <div users-image-upload></div>
	
	<form class="form" name="updateUserForm" ng-submit="updateUser(updateUserForm.$valid)" novalidate>

	    <div class="form-section basic-info">
			<h4 class="section-title">Basic Information</h4>
			<div class="form-group company" ng-class="{'invalid' : updateUserForm.company.$invalid && updateUserForm.company.$dirty, 'valid' : updateUserForm.company.$valid && updateUserForm.company.$dirty}">
				<label for="causeName" class="inline">Cause Name</label>
				<input type="company" name="company" id="causeName" class="form-control" placeholder="Organization or Cause name" ng-model="user.company_name" ng-pattern="companyRegex" required show-form-errors />
				<p class="form-helper" ng-if="updateUserForm.company.$error.pattern">This field only accepts letters and numbers</p>
				<p class="form-helper" ng-if="updateUserForm.company.$dirty && updateUserForm.company.$error.required && !updateUserForm.company.$focused">Cause Name is required!</p>
			</div>

			<div class="form-group email" ng-class="{'invalid' : updateUserForm.email.$invalid && updateUserForm.email.$dirty, 'valid' : updateUserForm.email.$valid && updateUserForm.email.$dirty}">
				<label for="causeEmail" class="inline">Email</label>
				<input type="email" name="email" id="causeEmail" class="form-control" placeholder="email@address.com" ng-model="user.email" ng-pattern="emailRegex" required show-form-errors />
				<p class="form-helper" ng-if="updateUserForm.email.$error.pattern && !updateUserForm.email.$focused">Invalid Email Address</p>
				<p class="form-helper" ng-if="updateUserForm.email.$dirty && updateUserForm.email.$error.required && !updateUserForm.email.$focused">Email Address is required!</p>
			</div>
		</div>

		<div class="form-section contact-info">
			<h4 class="section-title">Contact Information</h4>
			<div class="sub-section name">
	            <div class="form-group first-name" ng-class="{'invalid' : signupForm.first_name.$invalid && signupForm.first_name.$dirty, 'valid' : signupForm.first_name.$valid && signupForm.first_name.$dirty}">
	                <label for="first_name" class="inline">First Name</label>
	                <input type="text" name="first_name" id="first_name" class="form-control" placeholder="Given Name" ng-model="user.first_name" ng-pattern="nameRegex" required show-form-errors />
	                <p class="form-helper" ng-if="signupForm.first_name.$error.pattern && !signupForm.first_name.$focused">Your name can only contain letters.</p>
	                <p class="form-helper" ng-if="signupForm.first_name.$dirty && signupForm.first_name.$error.required && !signupForm.first_name.$focused">First Name is required!</p>
	            </div>
	            <div class="form-group last-name" ng-class="{'invalid' : signupForm.last_name.$invalid && signupForm.last_name.$dirty, 'valid' : signupForm.last_name.$valid && signupForm.last_name.$dirty}">
	                <label for="last_name" class="inline">Last Name</label>
	                <input type="text" name="last_name" id="last_name" class="form-control" placeholder="Surname" ng-model="user.last_name" ng-pattern="nameRegex" required show-form-errors />
	                <p class="form-helper" ng-if="signupForm.last_name.$error.pattern && !signupForm.last_name.$focused">Your name can only contain letters.</p>
	                <p class="form-helper" ng-if="signupForm.last_name.$dirty && signupForm.last_name.$error.required && !signupForm.last_name.$focused">Last Name is required!</p>
	            </div>
	        </div>
			<div class="form-group phone" ng-class="{'invalid' : updateUserForm.phone.$invalid && updateUserForm.phone.$dirty, 'valid' : updateUserForm.phone.$valid && updateUserForm.phone.$dirty}">
				<label for="causePhone" class="inline">Phone</label>
				<input type="text" name="phone" id="causePhone" class="form-control" placeholder="604-321-1234" ng-model="user.phone" ng-pattern="phoneRegex" ng-change="formatNumber()" maxlength=14 required show-form-errors />
				<p class="form-helper" ng-if="updateUserForm.phone.$error.pattern && !updateUserForm.phone.$focused">Invalid Phone Number</p>
				<p class="form-helper" ng-if="updateUserForm.phone.$dirty && updateUserForm.phone.$error.required && !updateUserForm.phone.$focused">A Phone Number is required so users can learn more about your organization</p>
			</div>
		</div>

		<div class="form-section location-info">
			<h4 class="section-title">Cause Location</h4>
			<div class="form-group street" ng-class="{'invalid' : updateUserForm.street.$invalid && updateUserForm.street.$dirty, 'valid' : updateUserForm.street.$valid && updateUserForm.street.$dirty}">
				<label for="causeStreetAddress" class="inline">Street Address</label>
				<input type="text" name="street" id="causeStreetAddress" class="form-control" placeholder="123 Address Street" ng-model="user.street_address" ng-minlength=4 required show-form-errors />
				<p class="form-helper" ng-if="updateUserForm.street.$dirty && updateUserForm.street.$error.required && !updateUserForm.street.$focused">This field is required!</p>
			</div>
			<div class="sub-section region">
				<div class="form-group country">
					<label for="causeCountry" class="inline">Country</label>
					<select name="country" 
						id="causeCountry" 
						ng-model="user.country" 
						ng-change="countryChange(user)" 
						ng-options="c.name for c in countryList"
						required>
					</select>
				</div>
				<div class="form-group state">
					<label for="causeState" class="inline"><span ng-if="user.country.code == 'US'">State</span><span ng-if="user.country.code == 'CA'">Province</span></label>
					<select name="state" 
						id="causeState" 
						ng-model="user.state" 
						ng-change="stateChange(user)" 
						ng-options="s.name for s in states"
						required>
					</select>
				</div>
			</div>
			<div class="sub-section city-zip">
				<div class="form-group city" ng-class="{'invalid' : updateUserForm.city.$invalid && updateUserForm.city.$dirty, 'valid' : updateUserForm.city.$valid && updateUserForm.city.$dirty}">
					<label for="causeCity" class="inline">City</label>
					<input type="text" name="city" id="causeCity" class="form-control" placeholder="ex: Vancouver" ng-model="user.city" required show-form-errors />
					<p class="form-helper" ng-if="updateUserForm.city.$dirty && updateUserForm.city.$error.required && !updateUserForm.city.$focused">This field is required!</p>
				</div>
				<div class="form-group zip" ng-class="{'invalid' : updateUserForm.zip.$invalid && updateUserForm.zip.$dirty, 'valid' : updateUserForm.zip.$valid && updateUserForm.zip.$dirty}">
					<label for="causeZip" class="inline"><span ng-if="user.country.code == 'US'">Zip</span><span ng-if="user.country.code == 'CA'">Postal Code</span></label>
					<input type="text" name="zip" id="causeZip" class="form-control" placeholder="{{zipPlaceholder}}" ng-model="user.zip" ng-minlength=5 maxlength=7 ng-pattern="zipRegex" required show-form-errors />
					<p class="form-helper" ng-if="updateUserForm.zip.$error.pattern && !updateUserForm.zip.$focused">Invalid <span ng-if="selectedCountry.code == 'US'">Zip Code</span><span ng-if="selectedCountry.code == 'CA'">Postal Code</span></p>
					<p class="form-helper" ng-if="updateUserForm.zip.$dirty && updateUserForm.zip.$error.required && !updateUserForm.zip.$focused">This field is required!</p>
				</div>
			</div>
			<div class="form-group output address">
				<i class="icon icon-mark-map"></i>
				<div class="address_output">
					<div class="complete_address_label">Complete Address</div>
					<div class="complete_street_address">{{user.street_address || "Street Address"}}, {{user.city || "City"}}, {{user.state.code}}</div>
					<div class="complete_country_zip">{{user.country.name}} {{user.zip}}</div>
				</div>
			</div>
		</div>

		<div class="form-section company-details">
			<h4 class="section-title">Cause Details</h4>
			<div class="form-group website" ng-class="{'invalid' : updateUserForm.website.$invalid && updateUserForm.website.$dirty, 'valid' : updateUserForm.website.$valid && updateUserForm.website.$dirty}">
				<label for="causeWebsite" class="inline">Website</label>
				<input type="website" name="website" id="causeWebsite" class="form-control" placeholder="www.website.com" ng-model="user.website" ng-pattern="websiteRegex" required show-form-errors />
				<p class="form-helper" ng-if="updateUserForm.website.$error.pattern && !updateUserForm.website.$focused">Invalid Website</p>
				<p class="form-helper" ng-if="updateUserForm.website.$dirty && updateUserForm.website.$error.required && !updateUserForm.website.$focused">A website is required so users can learn more about your organization</p>
			</div>

			<div class="form-group tags" ng-class="{'invalid' : updateUserForm.tags.$invalid && updateUserForm.tags.$dirty, 'valid' : updateUserForm.tags.$valid && updateUserForm.tags.$dirty}">
				<label for="causeTags" class="block">Tags</label>
				<tags-input ng-model="tags" name="tags" id="causeTags" class="tags-input" allowed-tags-pattern="^[^!@#$%&*:;.?]*$" min-tags="1" show-form-errors></tags-input>
				<p class="form-helper info" ng-if="updateUserForm.tags.$focused && updateUserForm.tags.$valid">Please add a few comma-separated tags that describe your business.</p>
				<p class="form-helper" ng-if="updateUserForm.tags.$dirty && updateUserForm.tags.$invalid && !updateUserForm.tags.$error.minTags">This field only accepts letters, numbers, and commas.</p>
				<p class="form-helper" ng-if="updateUserForm.tags.$dirty && updateUserForm.tags.$error.minTags && !updateUserForm.tags.$focused">This field is required!</p>
			</div>
			<div class="form-group company-description" ng-class="{'invalid' : updateUserForm.companyDescription.$invalid && updateUserForm.companyDescription.$dirty, 'valid' : updateUserForm.companyDescription.$valid && updateUserForm.companyDescription.$dirty}">
				<label for="causeDescription" class="block">Cause Description</label>
				<textarea name="description" id="causeDescription" class="form-control with-label-above" placeholder="The first 140 characters will be used as your summary." ng-model="user.description" ng-change="setSummary(user)" ng-pattern="textAreaRegex" required show-form-errors></textarea>
				<p class="form-helper info" ng-if="updateUserForm.description.$focused && !updateUserForm.description.$error.pattern">Please add a description for your business. It can be as long as you want, but the first sentence will be used as your company summary.</p>
				<p class="form-helper" ng-if="updateUserForm.description.$dirty && updateUserForm.description.$error.pattern">This field only accepts letters, numbers, punctuation, and some special characters.</p>
				<p class="form-helper" ng-if="updateUserForm.description.$dirty && updateUserForm.description.$error.required && !updateUserForm.description.$focused">This field is required!</p>
			</div>
			<div class="form-group summary">
				<label for="causeSummary" class="inline">Cause Summary</label>
				<input type="text" name="summary" id="causeSummary" class="form-control" placeholder="" ng-model="user.summary" tabindex="-1" readonly />
			</div>
		</div>

	    <div class="form-group form-buttons">
	        <button class="btn button button-primary" type="submit" ng-disabled="updateUserForm.$invalid">Save Changes</button>
	    </div>

    </form>
</div>